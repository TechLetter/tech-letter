basePath: /api/v1
definitions:
  dto.BlogDTO:
    properties:
      id:
        type: string
      name:
        type: string
      url:
        type: string
    type: object
  dto.BlogFilterDTO:
    properties:
      items:
        items:
          $ref: '#/definitions/dto.BlogFilterItem'
        type: array
    type: object
  dto.BlogFilterItem:
    properties:
      count:
        type: integer
      id:
        type: string
      name:
        type: string
    type: object
  dto.CategoryFilterDTO:
    properties:
      items:
        items:
          $ref: '#/definitions/dto.FilterItem'
        type: array
    type: object
  dto.ErrorResponseDTO:
    properties:
      error:
        example: invalid_token
        type: string
    type: object
  dto.FilterItem:
    properties:
      count:
        type: integer
      name:
        type: string
    type: object
  dto.MessageResponseDTO:
    properties:
      message:
        example: view count incremented successfully
        type: string
    type: object
  dto.PaginationBlogDTO:
    properties:
      data:
        items:
          $ref: '#/definitions/dto.BlogDTO'
        type: array
      page:
        type: integer
      page_size:
        type: integer
      total:
        type: integer
    type: object
  dto.PaginationPostDTO:
    properties:
      data:
        items:
          $ref: '#/definitions/dto.PostDTO'
        type: array
      page:
        type: integer
      page_size:
        type: integer
      total:
        type: integer
    type: object
  dto.PostDTO:
    properties:
      blog_id:
        type: string
      blog_name:
        type: string
      categories:
        items:
          type: string
        type: array
      id:
        type: string
      is_bookmarked:
        type: boolean
      link:
        type: string
      published_at:
        type: string
      summary:
        type: string
      tags:
        items:
          type: string
        type: array
      thumbnail_url:
        type: string
      title:
        type: string
      view_count:
        type: integer
    type: object
  dto.TagFilterDTO:
    properties:
      items:
        items:
          $ref: '#/definitions/dto.FilterItem'
        type: array
    type: object
  dto.UserProfileDTO:
    properties:
      created_at:
        example: "2025-01-01T12:00:00Z"
        type: string
      email:
        example: user@example.com
        type: string
      name:
        example: 홍길동
        type: string
      profile_image:
        example: https://example.com/avatar.png
        type: string
      provider:
        example: google
        type: string
      provider_sub:
        example: "1234567890"
        type: string
      role:
        example: user
        type: string
      updated_at:
        example: "2025-01-01T12:00:00Z"
        type: string
      user_code:
        example: user_1234
        type: string
    type: object
  handlers.sessionExchangeRequest:
    properties:
      session:
        type: string
    type: object
info:
  contact: {}
  description: 요약된 기술 블로그 포스트를 조회하고 사용자 인증/프로필을 관리하는 API입니다.
  title: Tech-Letter 공개 API
  version: "1.0"
paths:
  /auth/google/callback:
    get:
      description: state 값을 검증하고, code로 Google 액세스 토큰을 교환한 뒤 사용자 정보를 조회/업서트하고 JWT를
        발급하여 로그인 완료 페이지로 리다이렉트합니다.
      produces:
      - application/json
      responses:
        "302":
          description: 로그인 완료 페이지로 리다이렉트 (성공 시 토큰 포함)
          schema:
            type: string
      summary: Google OAuth 콜백 처리
      tags:
      - auth
  /auth/google/login:
    get:
      description: state 값을 생성해 쿠키에 저장한 뒤, Google OAuth 인증 페이지로 리다이렉트합니다. 실패 시에도 프론트의
        로그인 완료 페이지로 토큰 없이 이동합니다.
      produces:
      - application/json
      responses:
        "302":
          description: Google OAuth 로그인 페이지 또는 로그인 완료 페이지로 리다이렉트
          schema:
            type: string
      summary: Google 로그인 시작
      tags:
      - auth
  /auth/session/exchange:
    post:
      consumes:
      - application/json
      description: 짧은 TTL을 가진 session ID를 받아, 유저 서비스에 위임해 JWT 액세스 토큰으로 교환합니다.
      parameters:
      - description: 세션 교환 요청
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/handlers.sessionExchangeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: access_token 포함
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 세션 만료 또는 유효하지 않음
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 로그인 세션을 JWT 액세스 토큰으로 교환
      tags:
      - auth
  /blogs:
    get:
      description: 단순 페이징으로 블로그 목록을 조회합니다.
      parameters:
      - description: 페이지 번호 (1부터 시작)
        in: query
        name: page
        type: integer
      - description: 페이지 크기 (최대 100)
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.PaginationBlogDTO'
      summary: 블로그 목록 조회
      tags:
      - blogs
  /filters/blogs:
    get:
      description: 포스트 개수와 함께 블로그 필터 목록을 조회합니다.
      parameters:
      - collectionFormat: csv
        description: 카테고리 목록 (OR 조건)
        in: query
        items:
          type: string
        name: categories
        type: array
      - collectionFormat: csv
        description: 태그 목록 (OR 조건)
        in: query
        items:
          type: string
        name: tags
        type: array
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.BlogFilterDTO'
      summary: 블로그 필터 조회
      tags:
      - filters
  /filters/categories:
    get:
      description: 포스트 개수와 함께 카테고리 필터 목록을 조회합니다.
      parameters:
      - description: 블로그 ID
        in: query
        name: blog_id
        type: string
      - collectionFormat: csv
        description: 태그 목록 (OR 조건)
        in: query
        items:
          type: string
        name: tags
        type: array
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.CategoryFilterDTO'
      summary: 카테고리 필터 조회
      tags:
      - filters
  /filters/tags:
    get:
      description: 포스트 개수와 함께 태그 필터 목록을 조회합니다.
      parameters:
      - description: 블로그 ID
        in: query
        name: blog_id
        type: string
      - collectionFormat: csv
        description: 카테고리 목록 (OR 조건)
        in: query
        items:
          type: string
        name: categories
        type: array
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.TagFilterDTO'
      summary: 태그 필터 조회
      tags:
      - filters
  /posts:
    get:
      description: 필터와 페이징 조건으로 요약된 기술 블로그 포스트 목록을 조회합니다.
      parameters:
      - description: 페이지 번호 (1부터 시작)
        in: query
        name: page
        type: integer
      - description: 페이지 크기 (최대 100)
        in: query
        name: page_size
        type: integer
      - collectionFormat: csv
        description: 카테고리 목록 (OR 조건)
        in: query
        items:
          type: string
        name: categories
        type: array
      - collectionFormat: csv
        description: 태그 목록 (OR 조건)
        in: query
        items:
          type: string
        name: tags
        type: array
      - description: 블로그 ID
        in: query
        name: blog_id
        type: string
      - description: 블로그 이름
        in: query
        name: blog_name
        type: string
      - description: AI 요약 완료 여부
        in: query
        name: status_ai_summarized
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.PaginationPostDTO'
      summary: 포스트 목록 조회
      tags:
      - posts
  /posts/{id}:
    get:
      description: ObjectID 기준으로 특정 포스트를 조회합니다.
      parameters:
      - description: 포스트 ObjectID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.PostDTO'
      summary: 포스트 단건 조회
      tags:
      - posts
  /posts/{id}/bookmark:
    delete:
      description: 현재 로그인한 사용자의 지정된 포스트 북마크를 해제합니다.
      parameters:
      - description: 'Bearer 액세스 토큰 (예: Bearer eyJ...)'
        in: header
        name: Authorization
        required: true
        type: string
      - description: 포스트 ObjectID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: 콘텐츠 없음
          schema:
            type: string
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponseDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponseDTO'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/dto.ErrorResponseDTO'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponseDTO'
      summary: 포스트 북마크 제거
      tags:
      - posts
    post:
      description: 현재 로그인한 사용자의 지정된 포스트를 북마크합니다.
      parameters:
      - description: 'Bearer 액세스 토큰 (예: Bearer eyJ...)'
        in: header
        name: Authorization
        required: true
        type: string
      - description: 포스트 ObjectID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/dto.MessageResponseDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponseDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponseDTO'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponseDTO'
      summary: 포스트 북마크 추가
      tags:
      - posts
  /posts/{id}/view:
    post:
      description: 지정한 포스트의 조회 수(view_count)를 1 증가시킵니다.
      parameters:
      - description: 포스트 ObjectID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.MessageResponseDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponseDTO'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/dto.ErrorResponseDTO'
      summary: 포스트 조회 수 증가
      tags:
      - posts
  /posts/bookmarks:
    get:
      description: 현재 로그인한 사용자의 북마크한 포스트들을 /posts 목록과 동일한 형식으로 조회합니다.
      parameters:
      - description: 'Bearer 액세스 토큰 (예: Bearer eyJ...)'
        in: header
        name: Authorization
        required: true
        type: string
      - description: 페이지 번호 (1부터 시작)
        in: query
        name: page
        type: integer
      - description: 페이지 크기 (최대 100)
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.PaginationPostDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponseDTO'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponseDTO'
      summary: 북마크한 포스트 목록 조회
      tags:
      - posts
  /users/me:
    delete:
      description: Authorization 헤더의 JWT에서 user_code를 추출해 해당 사용자의 계정과 북마크를 삭제합니다.
      parameters:
      - description: 'Bearer 액세스 토큰 (예: Bearer eyJ...)'
        in: header
        name: Authorization
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 삭제 성공
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: 인증 실패
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: 유저 미존재
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 서버 오류
          schema:
            additionalProperties:
              type: string
            type: object
      summary: 회원 탈퇴 (현재 로그인한 사용자)
      tags:
      - users
  /users/profile:
    get:
      description: Authorization 헤더에 포함된 JWT를 검증하고, 현재 로그인한 사용자의 프로필 정보를 조회합니다.
      parameters:
      - description: 'Bearer 액세스 토큰 (예: Bearer eyJ...)'
        in: header
        name: Authorization
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.UserProfileDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponseDTO'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/dto.ErrorResponseDTO'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.ErrorResponseDTO'
      summary: 현재 로그인한 사용자 프로필 조회
      tags:
      - users
swagger: "2.0"
