{
    "swagger": "2.0",
    "info": {
        "description": "요약된 기술 블로그 포스트를 조회하고 사용자 인증/프로필을 관리하는 API입니다.",
        "title": "Tech-Letter 공개 API",
        "contact": {},
        "version": "1.0"
    },
    "basePath": "/api/v1",
    "paths": {
        "/auth/google/callback": {
            "get": {
                "description": "state 값을 검증하고, code로 Google 액세스 토큰을 교환한 뒤 사용자 정보를 조회/업서트하고 JWT를 발급하여 로그인 완료 페이지로 리다이렉트합니다.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "auth"
                ],
                "summary": "Google OAuth 콜백 처리",
                "responses": {
                    "302": {
                        "description": "로그인 완료 페이지로 리다이렉트 (성공 시 토큰 포함)",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/auth/google/login": {
            "get": {
                "description": "state 값을 생성해 쿠키에 저장한 뒤, Google OAuth 인증 페이지로 리다이렉트합니다. 실패 시에도 프론트의 로그인 완료 페이지로 토큰 없이 이동합니다.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "auth"
                ],
                "summary": "Google 로그인 시작",
                "responses": {
                    "302": {
                        "description": "Google OAuth 로그인 페이지 또는 로그인 완료 페이지로 리다이렉트",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/blogs": {
            "get": {
                "description": "단순 페이징으로 블로그 목록을 조회합니다.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "blogs"
                ],
                "summary": "블로그 목록 조회",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "페이지 번호 (1부터 시작)",
                        "name": "page",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "페이지 크기 (최대 100)",
                        "name": "page_size",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/dto.PaginationBlogDTO"
                        }
                    }
                }
            }
        },
        "/filters/blogs": {
            "get": {
                "description": "포스트 개수와 함께 블로그 필터 목록을 조회합니다.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "filters"
                ],
                "summary": "블로그 필터 조회",
                "parameters": [
                    {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "collectionFormat": "csv",
                        "description": "카테고리 목록 (OR 조건)",
                        "name": "categories",
                        "in": "query"
                    },
                    {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "collectionFormat": "csv",
                        "description": "태그 목록 (OR 조건)",
                        "name": "tags",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/dto.BlogFilterDTO"
                        }
                    }
                }
            }
        },
        "/filters/categories": {
            "get": {
                "description": "포스트 개수와 함께 카테고리 필터 목록을 조회합니다.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "filters"
                ],
                "summary": "카테고리 필터 조회",
                "parameters": [
                    {
                        "type": "string",
                        "description": "블로그 ID",
                        "name": "blog_id",
                        "in": "query"
                    },
                    {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "collectionFormat": "csv",
                        "description": "태그 목록 (OR 조건)",
                        "name": "tags",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/dto.CategoryFilterDTO"
                        }
                    }
                }
            }
        },
        "/filters/tags": {
            "get": {
                "description": "포스트 개수와 함께 태그 필터 목록을 조회합니다.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "filters"
                ],
                "summary": "태그 필터 조회",
                "parameters": [
                    {
                        "type": "string",
                        "description": "블로그 ID",
                        "name": "blog_id",
                        "in": "query"
                    },
                    {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "collectionFormat": "csv",
                        "description": "카테고리 목록 (OR 조건)",
                        "name": "categories",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/dto.TagFilterDTO"
                        }
                    }
                }
            }
        },
        "/posts": {
            "get": {
                "description": "필터와 페이징 조건으로 요약된 기술 블로그 포스트 목록을 조회합니다.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "posts"
                ],
                "summary": "포스트 목록 조회",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "페이지 번호 (1부터 시작)",
                        "name": "page",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "페이지 크기 (최대 100)",
                        "name": "page_size",
                        "in": "query"
                    },
                    {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "collectionFormat": "csv",
                        "description": "카테고리 목록 (OR 조건)",
                        "name": "categories",
                        "in": "query"
                    },
                    {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "collectionFormat": "csv",
                        "description": "태그 목록 (OR 조건)",
                        "name": "tags",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "블로그 ID",
                        "name": "blog_id",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "블로그 이름",
                        "name": "blog_name",
                        "in": "query"
                    },
                    {
                        "type": "boolean",
                        "description": "AI 요약 완료 여부",
                        "name": "status_ai_summarized",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/dto.PaginationPostDTO"
                        }
                    }
                }
            }
        },
        "/posts/bookmarks": {
            "get": {
                "description": "현재 로그인한 사용자의 북마크한 포스트들을 /posts 목록과 동일한 형식으로 조회합니다.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "posts"
                ],
                "summary": "북마크한 포스트 목록 조회",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer 액세스 토큰 (예: Bearer eyJ...)",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "페이지 번호 (1부터 시작)",
                        "name": "page",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "페이지 크기 (최대 100)",
                        "name": "page_size",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/dto.PaginationPostDTO"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/dto.ErrorResponseDTO"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/dto.ErrorResponseDTO"
                        }
                    }
                }
            }
        },
        "/posts/{id}": {
            "get": {
                "description": "ObjectID 기준으로 특정 포스트를 조회합니다.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "posts"
                ],
                "summary": "포스트 단건 조회",
                "parameters": [
                    {
                        "type": "string",
                        "description": "포스트 ObjectID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/dto.PostDTO"
                        }
                    }
                }
            }
        },
        "/posts/{id}/bookmark": {
            "post": {
                "description": "현재 로그인한 사용자의 지정된 포스트를 북마크합니다.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "posts"
                ],
                "summary": "포스트 북마크 추가",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer 액세스 토큰 (예: Bearer eyJ...)",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "포스트 ObjectID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created",
                        "schema": {
                            "$ref": "#/definitions/dto.MessageResponseDTO"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/dto.ErrorResponseDTO"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/dto.ErrorResponseDTO"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/dto.ErrorResponseDTO"
                        }
                    }
                }
            },
            "delete": {
                "description": "현재 로그인한 사용자의 지정된 포스트 북마크를 해제합니다.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "posts"
                ],
                "summary": "포스트 북마크 제거",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer 액세스 토큰 (예: Bearer eyJ...)",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "포스트 ObjectID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "204": {
                        "description": "콘텐츠 없음",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/dto.ErrorResponseDTO"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/dto.ErrorResponseDTO"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/dto.ErrorResponseDTO"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/dto.ErrorResponseDTO"
                        }
                    }
                }
            }
        },
        "/posts/{id}/view": {
            "post": {
                "description": "지정한 포스트의 조회 수(view_count)를 1 증가시킵니다.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "posts"
                ],
                "summary": "포스트 조회 수 증가",
                "parameters": [
                    {
                        "type": "string",
                        "description": "포스트 ObjectID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/dto.MessageResponseDTO"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/dto.ErrorResponseDTO"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/dto.ErrorResponseDTO"
                        }
                    }
                }
            }
        },
        "/users/profile": {
            "get": {
                "description": "Authorization 헤더에 포함된 JWT를 검증하고, 현재 로그인한 사용자의 프로필 정보를 조회합니다.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "users"
                ],
                "summary": "현재 로그인한 사용자 프로필 조회",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer 액세스 토큰 (예: Bearer eyJ...)",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/dto.UserProfileDTO"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/dto.ErrorResponseDTO"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/dto.ErrorResponseDTO"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/dto.ErrorResponseDTO"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "dto.BlogDTO": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "url": {
                    "type": "string"
                }
            }
        },
        "dto.BlogFilterDTO": {
            "type": "object",
            "properties": {
                "items": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/dto.BlogFilterItem"
                    }
                }
            }
        },
        "dto.BlogFilterItem": {
            "type": "object",
            "properties": {
                "count": {
                    "type": "integer"
                },
                "id": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                }
            }
        },
        "dto.CategoryFilterDTO": {
            "type": "object",
            "properties": {
                "items": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/dto.FilterItem"
                    }
                }
            }
        },
        "dto.ErrorResponseDTO": {
            "type": "object",
            "properties": {
                "error": {
                    "type": "string",
                    "example": "invalid_token"
                }
            }
        },
        "dto.FilterItem": {
            "type": "object",
            "properties": {
                "count": {
                    "type": "integer"
                },
                "name": {
                    "type": "string"
                }
            }
        },
        "dto.MessageResponseDTO": {
            "type": "object",
            "properties": {
                "message": {
                    "type": "string",
                    "example": "view count incremented successfully"
                }
            }
        },
        "dto.PaginationBlogDTO": {
            "type": "object",
            "properties": {
                "data": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/dto.BlogDTO"
                    }
                },
                "page": {
                    "type": "integer"
                },
                "page_size": {
                    "type": "integer"
                },
                "total": {
                    "type": "integer"
                }
            }
        },
        "dto.PaginationPostDTO": {
            "type": "object",
            "properties": {
                "data": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/dto.PostDTO"
                    }
                },
                "page": {
                    "type": "integer"
                },
                "page_size": {
                    "type": "integer"
                },
                "total": {
                    "type": "integer"
                }
            }
        },
        "dto.PostDTO": {
            "type": "object",
            "properties": {
                "blog_id": {
                    "type": "string"
                },
                "blog_name": {
                    "type": "string"
                },
                "categories": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "id": {
                    "type": "string"
                },
                "is_bookmarked": {
                    "type": "boolean"
                },
                "link": {
                    "type": "string"
                },
                "published_at": {
                    "type": "string"
                },
                "summary": {
                    "type": "string"
                },
                "tags": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "thumbnail_url": {
                    "type": "string"
                },
                "title": {
                    "type": "string"
                },
                "view_count": {
                    "type": "integer"
                }
            }
        },
        "dto.TagFilterDTO": {
            "type": "object",
            "properties": {
                "items": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/dto.FilterItem"
                    }
                }
            }
        },
        "dto.UserProfileDTO": {
            "type": "object",
            "properties": {
                "created_at": {
                    "type": "string",
                    "example": "2025-01-01T12:00:00Z"
                },
                "email": {
                    "type": "string",
                    "example": "user@example.com"
                },
                "name": {
                    "type": "string",
                    "example": "홍길동"
                },
                "profile_image": {
                    "type": "string",
                    "example": "https://example.com/avatar.png"
                },
                "provider": {
                    "type": "string",
                    "example": "google"
                },
                "provider_sub": {
                    "type": "string",
                    "example": "1234567890"
                },
                "role": {
                    "type": "string",
                    "example": "user"
                },
                "updated_at": {
                    "type": "string",
                    "example": "2025-01-01T12:00:00Z"
                },
                "user_code": {
                    "type": "string",
                    "example": "user_1234"
                }
            }
        }
    }
}